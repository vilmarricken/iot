<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>IoT Mansion</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="css/bootstrap-3.3.7.min.css">
<script src="js/bootstrap-3.3.7.min.js"></script>
<script src="js/jquery-3.2.1.min.js"></script>
<script>
var controllers = [];
$(document).ready(function(){
    $("button").click(function(){
    	
    });
});

function back(){
	controllers.pop();
	listControllers();
}

function controller(id){
	controllers.push(id);
	listControllers();
}

function listControllers(){
	var action = "/iot/house/controllers";
	if( controllers.length > 0 ){
		action += "/" controllers[controllers.length - 1]; 
	}
    $.get(action, function(data, status){
        if(status == 'success'){
			$("#data").detach();
			$("#data").detach();
			buildControllers(data);
		}
    });
}


function buildControllers(data){
	$(buildData(data[i])).appendTo("#container");
	var ret = "<p>";
	if(data.length > 0){
		for(i = 0; i < data.length; i++ ){
			if(data[i].type == "REGION"){
				ret += buildRegion(data[i]);
			} else if(data[i].type == "CONTROLLER"){
				ret += buildController(data[i]);
			} else {
				ret += data[i].toString();
			}
		}
	}
	ret += "</p>";
	return ret;
}

</script>
</head>
<body>
<div id="container">
<button>Atualizar</button>

</div>
</body>
</html>